<!DOCTYPE html>
<html lang="es" class="h-100">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS (as per normal) -->
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet' />
    <!-- Add the Bootstrap-Nightfall Variant CSS (the media attribute is for dark auto-switching) -->
    <link href='https://cdn.jsdelivr.net/npm/bootstrap-dark-5@1.1.3/dist/css/bootstrap-nightfall.min.css'
        rel='stylesheet' />
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.min.js" integrity="sha512-OvBgP9A2JBgiRad/mM36mkzXSXaJE9BEIENnVEmeZdITvwT09xnxLtT4twkCa8m/loMbPHsvPl0T8lRGVBwjlQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
        integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body class="h-100">
    <script>
        let typeList;
        let selTVGenre;
        $(document).ready(function () {
            $.getJSON('https://raw.githubusercontent.com/apdev55/MyLatinTV/main/channels.json', function (jd) {
                typeList = jd;
                console.log(typeList);
                selTVGenre = chooseGenre('sports')
            });
            $(".modal-header button").click(function(){
                $(".modal-body iframe").remove();
            });
        });
        function chooseGenre(genre) {
            for (let i = 0; i < typeList[genre].channel.length; i++) {
                    let liveContent = "<button class='btn btn-danger mx-2' id='" + [i] + "' onclick=\"chooseChannel("+[i]+",'" + typeList[genre].channel[i].name + "')\" type='button' data-bs-toggle='modal' data-bs-target='#staticBackdrop'><img src='" + typeList[genre].channel[i].img + "' alt='" + typeList[genre].channel[i].name + "'></button>"
                    $(".contenido").append(liveContent);
                    console.log(typeList[genre].channel[i]);
                }
            return genre;
        }
        function chooseOption(url) {
            $(".modal-body .player-container").html("<iframe src='"+url+"' allow='encrypted-media' allowfullscreen='yes' frameborder='0' height='400' sandbox='allow-same-origin allow-scripts' scrolling='no' width='100%'></iframe>");
        }
        function chooseChannel(index, name) {
            console.log(selTVGenre);
            $("#staticBackdropLabel").html(name);
            $(".modal-body .opt-container").html('');
            for (let i = 0; i < typeList[selTVGenre].channel[index].live.length; i++) {
                $(".modal-body .opt-container").append('<button class="btn btn-danger mx-2" id="opt'+[i]+'" onclick="chooseOption(\''+typeList[selTVGenre].channel[index].live[i]+'\')" type="button">Opci√≥n '+[i+1]+'</button>');
            }
        }
    </script>
    <nav class="navbar navbar-dark bg-dark d-flex justify-content-center">

    </nav>
    <div class='contenido d-flex justify-content-center flex-wrap'>
        <!-- Modal -->
        <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="staticBackdropLabel"></h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="opt-container d-flex justify-content-center flex-wrap">

                        </div>
                        <div class="player-container">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>